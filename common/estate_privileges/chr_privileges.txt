# Nobles' "Seimski Statuty" privilege
# Mechanics: Locks in higher noble loyalty while trading absolutism for parliament backing.
# Narrative: Models the Starshyna codifying Sejm statutes after Khmelnytsky to guard estate prerogatives.
# References: Zenon Kohut, *Russian Centralism and Ukrainian Autonomy* (1988); Mykhailo Hrushevsky,
# *History of Ukraine-Rus'*, vol. 9.
estate_nobles_chr_seimski_statuty = {
    icon = privilege_french_strong_duchies
    loyalty = 0.10
    influence = 0.05
    land_share = 10
    max_absolutism = -5

    is_valid = {
        tag = CHR
        has_estate = estate_nobles
    }
    can_select = {
        tag = CHR
        has_estate = estate_nobles
        can_select_monarch_power_privilege = {
            estate = estate_nobles
            type = mil
        }
    }

    benefits = {
        nobles_loyalty_modifier = 10
        parliament_backing_chance = 0.1
    }

    conditional_modifier = {
        trigger = { has_absolutism_reduction_for_estate_privileges = yes }
        modifier = { max_absolutism = 1 }
    }

    ai_will_do = {
        factor = 50
        modifier = {
            factor = 0
            OR = {
                NOT = { crown_land_share = 30 }
                estate_influence = {
                    estate = estate_nobles
                    influence = 95
                }
            }
            NOT = { has_estate_privilege = estate_nobles_nobility_primacy }
        }
        modifier = {
            factor = 0.75
            is_absolutism_active = yes
        }
        modifier = {
            factor = 1.5
            NOT = { mil = 2 }
        }
    }
}

# Clergy's "Chernihiv Collegium" privilege
# Mechanics: Unlocks once the Chernihiv Collegium monument is active and rewards scholarly clergy with reformist momentum.
# Narrative: Evokes the Mohyla Academy offshoot tutoring Left Bank clergy and officers through the Hetmanate era.
# References: Larry Wolff, *The Idea of Galicia* (2010); Frank Sysyn on Lazar Baranovych; Ihor Shevchenko, *The Ukrainian Baroque* (1971).
estate_church_chr_chernihiv_collegium = {
    icon = privilege_grant_autonomy
    loyalty = 0.10
    influence = 0.05
    land_share = 5
    max_absolutism = -5

    is_valid = {
        tag = CHR
        has_estate = estate_church
    }
    can_select = {
        tag = CHR
        has_estate = estate_church
    }

    benefits = {
        church_loyalty_modifier = 10
        global_institution_spread = 0.05
        global_missionary_strength = 0.02
        development_cost = -0.05
        technology_cost = -0.03
        idea_cost = -0.03
        reform_progress_growth = 0.05
        governing_capacity = 100
    }

    conditional_modifier = {
        trigger = { has_absolutism_reduction_for_estate_privileges = yes }
        modifier = { max_absolutism = 1 }
    }
    conditional_modifier = {
        trigger = { has_country_flag = mng_increased_land_rights_flag }
        modifier = { stability_cost_modifier = -0.05 }
    }
    conditional_modifier = {
        trigger = { has_government_mechanic = russian_modernization_mechanic }
        modifier = { monthly_russian_modernization = -0.03 }
    }

    ai_will_do = {
        factor = 40
        modifier = {
            factor = 0
            OR = {
                NOT = { crown_land_share = 25 }
                estate_influence = {
                    estate = estate_church
                    influence = 75
                }
            }
            NOT = { has_estate_privilege = estate_church_land_rights }
        }
        modifier = {
            factor = 0
            NOT = { governing_capacity_percentage = 0.5 }
        }
        modifier = {
            factor = 3
            OR = {
                AND = {
                    governing_capacity_percentage = 0.9
                    NOT = { has_estate_privilege = estate_church_land_rights }
                }
                AND = {
                    governing_capacity_percentage = 0.6
                    has_estate_privilege = estate_church_land_rights
                }
            }
        }
        modifier = {
            factor = 0.8
            is_absolutism_active = yes
        }
        modifier = {
            factor = 2
            governing_capacity_percentage = 0.9
        }
        modifier = {
            factor = 3
            governing_capacity_percentage = 1
        }
        modifier = {
            factor = 8
            NOT = { adm_tech = 12 }
            governing_capacity_percentage = 0.8
        }
        modifier = {
            factor = 5
            NOT = { adm_tech = 12 }
            NOT = { government_rank = 1 }
            governing_capacity_percentage = 0.65
        }
    }
}

# Cossacks' "Starshyna Collegium" privilege
# Mechanics: Grants cavalry discounts and manpower recovery once the frontier branch is chosen.
# Narrative: Captures hetman councils elevating senior officers into a permanent collegiate board during the Ruina.
# References: Orest Subtelny, *Ukraine: A History* (2009); Serhii Plokhy, *The Cossack Myth* (2012).
estate_cossacks_chr_starshyna_collegium = {
    icon = privilege_raise_host
    loyalty = 0.05
    influence = 0.10
    land_share = 5
    max_absolutism = -5

    is_valid = {
        tag = CHR
        has_estate = estate_cossacks
    }
    can_select = {
        tag = CHR
        has_estate = estate_cossacks
        has_country_flag = chr_frontier_branch_taken
    }

    benefits = {
        cossacks_loyalty_modifier = 10
        manpower_recovery_speed = 0.1
        cavalry_cost = -0.1
    }

    conditional_modifier = {
        trigger = { has_absolutism_reduction_for_estate_privileges = yes }
        modifier = { max_absolutism = 1 }
    }
    conditional_modifier = {
        trigger = { has_government_mechanic = russian_modernization_mechanic }
        modifier = { monthly_russian_modernization = -0.01 }
    }

    modifier_by_land_ownership = {
        allowed_cossack_fraction = 0.5
    }

    mechanics = {
        enables_cossack_regiments
        exempt_from_seize_land
    }

    ai_will_do = {
        factor = 25
        modifier = {
            factor = 10
            any_owned_province = { has_terrain = steppe }
        }
        modifier = {
            factor = 0
            OR = {
                NOT = { crown_land_share = 25 }
                estate_influence = {
                    estate = estate_cossacks
                    influence = 75
                }
            }
            NOT = { has_estate_privilege = estate_cossacks_establish_the_cossack_regiments }
        }
    }
    additional_description = {
        cossacks_regiment
    }
}

# Burghers' "Grain Cartels" privilege
# Mechanics: Requires the grain corridor flag, boosting trade and production via loyal burghers.
# Narrative: Represents Chernihiv grain syndicates leveraging privileges after canal and depot expansion.
# References: Serhii Plokhy, *The Cossacks and Religion* (1996); Frank Sysyn, *Between Poland and the Ukraine* (1985).
estate_burghers_chr_grain_cartels = {
    icon = privilege_diplo_power
    loyalty = 0.05
    influence = 0.05
    land_share = 10
    max_absolutism = -5

    is_valid = {
        tag = CHR
        has_estate = estate_burghers
    }
    can_select = {
        tag = CHR
        has_estate = estate_burghers
        has_country_flag = chr_grain_corridors_built
        can_select_monarch_power_privilege = {
            estate = estate_burghers
            type = dip
        }
    }

    benefits = {
        burghers_loyalty_modifier = 10
        production_efficiency = 0.05
        trade_efficiency = 0.05
        country_diplomatic_power = 1
    }

    conditional_modifier = {
        trigger = { has_absolutism_reduction_for_estate_privileges = yes }
        modifier = { max_absolutism = 1 }
    }
    conditional_modifier = {
        trigger = { has_government_mechanic = russian_modernization_mechanic }
        modifier = { monthly_russian_modernization = -0.03 }
    }

    ai_will_do = {
        factor = 60
        modifier = {
            factor = 0
            OR = {
                NOT = { crown_land_share = 30 }
                estate_influence = {
                    estate = estate_burghers
                    influence = 95
                }
            }
            NOT = { has_estate_privilege = estate_burghers_land_of_commerce }
        }
        modifier = {
            factor = 0.8
            is_absolutism_active = yes
        }
        modifier = {
            factor = 1.25
            NOT = { dip = 2 }
        }
    }
}

# ZAPORIZHIA SICH PRIVILEGES

# Cossacks' "Sich Rada Authority" privilege for Zaporizhia
# Mechanics: Grants republican tradition and autonomy but limits absolutism - reflects democratic nature of Sich
# Narrative: The Sich Rada (council) was supreme authority, electing all officers including Kosh Otaman
# References: Plokhy, *The Cossack Myth* (2012); Subtelny, *Ukraine: A History* (2009)
estate_cossacks_zaz_sich_rada = {
    icon = privilege_grant_autonomy
    loyalty = 0.15
    influence = 0.15
    land_share = 15
    max_absolutism = -10

    is_valid = {
        tag = ZAZ
        has_estate = estate_cossacks
    }
    can_select = {
        tag = ZAZ
        has_estate = estate_cossacks
    }

    benefits = {
        cossacks_loyalty_modifier = 15
        republican_tradition = 0.3
        governing_capacity_modifier = 0.10
        global_autonomy = 0.05
    }

    conditional_modifier = {
        trigger = { has_absolutism_reduction_for_estate_privileges = yes }
        modifier = { max_absolutism = 2 }
    }

    ai_will_do = {
        factor = 30
        modifier = {
            factor = 0
            is_absolutism_active = yes
        }
        modifier = {
            factor = 2
            government = republic
        }
    }
}

# Cossacks' "Chaiky Sea Raiders" privilege for Zaporizhia
# Mechanics: Grants naval raiding bonuses and slave raid capability but damages relations
# Narrative: Famous chaiky boat raids on Black Sea against Ottomans and Crimeans (1568-1650s)
# References: Ostapchuk on chaiky warfare; Fisher, *The Crimean Tatars* (1978)
estate_cossacks_zaz_chaiky_raids = {
    icon = privilege_military_power
    loyalty = 0.10
    influence = 0.10
    land_share = 10
    max_absolutism = -5

    is_valid = {
        tag = ZAZ
        has_estate = estate_cossacks
    }
    can_select = {
        tag = ZAZ
        has_estate = estate_cossacks
    }

    benefits = {
        cossacks_loyalty_modifier = 10
        privateer_efficiency = 0.33
        naval_forcelimit_modifier = 0.15
        may_perform_slave_raid = yes
    }

    penalties = {
        diplomatic_reputation = -1
    }

    conditional_modifier = {
        trigger = { has_absolutism_reduction_for_estate_privileges = yes }
        modifier = { max_absolutism = 1 }
    }

    ai_will_do = {
        factor = 25
        modifier = {
            factor = 2
            any_rival_country = {
                OR = {
                    tag = CRI
                    tag = TUR
                }
            }
        }
    }
}

# Cossacks' "Steppe Brotherhood" privilege for Zaporizhia
# Mechanics: Abolishes serfdom, grants tolerance and manpower but reduces tax
# Narrative: Sich accepted all free men as equals, rejecting feudal hierarchies
# References: Subtelny on Cossack egalitarianism; Plokhy on Sich social structure
estate_cossacks_zaz_free_steppe = {
    icon = privilege_grant_autonomy
    loyalty = 0.10
    influence = 0.10
    land_share = 10
    max_absolutism = -10

    is_valid = {
        tag = ZAZ
        has_estate = estate_cossacks
    }
    can_select = {
        tag = ZAZ
        has_estate = estate_cossacks
    }

    benefits = {
        cossacks_loyalty_modifier = 10
        manpower_recovery_speed = 0.20
        tolerance_heretic = 1
        global_unrest = -2
    }

    penalties = {
        global_tax_modifier = -0.15
    }

    conditional_modifier = {
        trigger = { has_absolutism_reduction_for_estate_privileges = yes }
        modifier = { max_absolutism = 2 }
    }

    ai_will_do = {
        factor = 20
        modifier = {
            factor = 0
            is_absolutism_active = yes
        }
    }
}

# Cossacks' "Wild Field Mastery" privilege for Zaporizhia
# Mechanics: Grants steppe warfare bonuses - movement, cavalry, attrition reduction
# Narrative: Zaporozhians mastered the Wild Fields, moving rapidly across vast steppes
# References: Sysyn on Cossack military tactics; Kohut on steppe warfare
estate_cossacks_zaz_wild_field = {
    icon = privilege_military_power
    loyalty = 0.10
    influence = 0.10
    land_share = 5
    max_absolutism = -5

    is_valid = {
        tag = ZAZ
        has_estate = estate_cossacks
    }
    can_select = {
        tag = ZAZ
        has_estate = estate_cossacks
    }

    benefits = {
        cossacks_loyalty_modifier = 10
        movement_speed = 0.25
        cavalry_power = 0.15
        shock_damage = 0.10
        land_attrition = -0.10
    }

    conditional_modifier = {
        trigger = { has_absolutism_reduction_for_estate_privileges = yes }
        modifier = { max_absolutism = 1 }
    }

    modifier_by_land_ownership = {
        cavalry_cost = -0.5
    }

    ai_will_do = {
        factor = 35
        modifier = {
            factor = 2
            any_owned_province = { has_terrain = steppe }
        }
    }
}

# HETMANATE PRIVILEGES

# Cossacks' "Registered Cossack Army" privilege for Hetmanate
# Mechanics: Grants infantry bonuses and discipline - professional standing army
# Narrative: Hetmanate maintained registered Cossack regiments as state soldiers (unlike free Sich)
# References: Kohut, *Russian Centralism* (1988); Subtelny, *The Mazepists* (1981)
estate_cossacks_het_registered_host = {
    icon = privilege_military_power
    loyalty = 0.10
    influence = 0.10
    land_share = 10
    max_absolutism = 5

    is_valid = {
        tag = HET
        has_estate = estate_cossacks
    }
    can_select = {
        tag = HET
        has_estate = estate_cossacks
    }

    benefits = {
        cossacks_loyalty_modifier = 10
        infantry_power = 0.15
        discipline = 0.05
        land_forcelimit_modifier = 0.15
    }

    conditional_modifier = {
        trigger = { has_absolutism_reduction_for_estate_privileges = yes }
        modifier = { max_absolutism = -1 }
    }

    mechanics = {
        enables_cossack_regiments
    }

    ai_will_do = {
        factor = 40
        modifier = {
            factor = 1.5
            is_absolutism_active = yes
        }
    }
}

# Nobles' "Starshyna Privileges" privilege for Hetmanate
# Mechanics: Grants advisor/general pool but demands influence
# Narrative: Starshyna (officer class) formed administrative elite of Hetmanate
# References: Kohut on starshyna class; Plokhy on Hetmanate administration
estate_nobles_het_starshyna_class = {
    icon = privilege_grant_autonomy
    loyalty = 0.10
    influence = 0.15
    land_share = 15
    max_absolutism = -10

    is_valid = {
        tag = HET
        has_estate = estate_nobles
    }
    can_select = {
        tag = HET
        has_estate = estate_nobles
    }

    benefits = {
        nobles_loyalty_modifier = 10
        advisor_pool = 2
        free_leader_pool = 2
        governing_capacity_modifier = 0.10
    }

    conditional_modifier = {
        trigger = { has_absolutism_reduction_for_estate_privileges = yes }
        modifier = { max_absolutism = 2 }
    }

    ai_will_do = {
        factor = 35
        modifier = {
            factor = 0
            is_absolutism_active = yes
        }
    }
}

# Nobles' "Hetman Autocracy" privilege for Hetmanate
# Mechanics: Grants absolutism and centralization but angers nobles
# Narrative: Some hetmans (Samoilovych, Mazepa) concentrated power vs starshyna
# References: Subtelny, *The Mazepists*; Kohut on hetman-starshyna conflicts
estate_nobles_het_hetman_power = {
    icon = privilege_military_power
    loyalty = -0.10
    influence = -0.10
    land_share = -10
    max_absolutism = 15

    is_valid = {
        tag = HET
        has_estate = estate_nobles
    }
    can_select = {
        tag = HET
        has_estate = estate_nobles
    }

    benefits = {
        reform_progress_growth = 0.15
        governing_capacity_modifier = 0.15
    }

    penalties = {
        nobles_loyalty_modifier = -10
    }

    conditional_modifier = {
        trigger = { has_absolutism_reduction_for_estate_privileges = yes }
        modifier = { max_absolutism = -3 }
    }

    ai_will_do = {
        factor = 30
        modifier = {
            factor = 3
            is_absolutism_active = yes
        }
        modifier = {
            factor = 0
            NOT = {
                estate_loyalty = {
                    estate = estate_nobles
                    loyalty = 60
                }
            }
        }
    }
}

# Burghers' "Left-Bank Development" privilege for Hetmanate
# Mechanics: Reduces development and building costs - agricultural expansion
# Narrative: Left Bank became agricultural heartland with refugees and new settlements
# References: Kohut on Left Bank economy; Subtelny on Hetmanate prosperity
estate_burghers_het_left_bank = {
    icon = privilege_grant_autonomy
    loyalty = 0.10
    influence = 0.10
    land_share = 10
    max_absolutism = -5

    is_valid = {
        tag = HET
        has_estate = estate_burghers
    }
    can_select = {
        tag = HET
        has_estate = estate_burghers
    }

    benefits = {
        burghers_loyalty_modifier = 10
        development_cost = -0.15
        build_cost = -0.15
        production_efficiency = 0.10
    }

    conditional_modifier = {
        trigger = { has_absolutism_reduction_for_estate_privileges = yes }
        modifier = { max_absolutism = 1 }
    }

    ai_will_do = {
        factor = 40
        modifier = {
            factor = 2
            NOT = { adm_tech = 10 }
        }
    }
}

# Church' "Kyiv-Mohyla Academy" privilege for Hetmanate
# Mechanics: Reduces idea/tech costs, boosts institution spread - education center
# Narrative: Kyiv-Mohyla Collegium/Academy was premier educational institution of Eastern Europe
# References: Shevchenko, *The Ukrainian Baroque*; Kohut on Hetmanate intellectual life
estate_church_het_academy = {
    icon = privilege_grant_autonomy
    loyalty = 0.15
    influence = 0.10
    land_share = 10
    max_absolutism = -5

    is_valid = {
        tag = HET
        has_estate = estate_church
    }
    can_select = {
        tag = HET
        has_estate = estate_church
    }

    benefits = {
        church_loyalty_modifier = 15
        idea_cost = -0.10
        technology_cost = -0.10
        global_institution_spread = 0.15
        advisor_pool = 1
    }

    conditional_modifier = {
        trigger = { has_absolutism_reduction_for_estate_privileges = yes }
        modifier = { max_absolutism = 1 }
    }

    ai_will_do = {
        factor = 45
        modifier = {
            factor = 2
            NOT = { adm_tech = 15 }
        }
    }
}


