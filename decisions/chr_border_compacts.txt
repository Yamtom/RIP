# Border Compacts â€” Mechanics, Narrative, References
# Mechanics: Targeted diplomatic decision trading power for mutual modifiers, queueing the review event chain with branch flags.
# Narrative: Emulates Hetmanate envoys renewing or stressing frontier patrol compacts with major neighbours.
# References: Zenon Kohut, *Russian Centralism and Ukrainian Autonomy* (1988); Serhii Plokhy, *The Cossack Myth* (2012).

country_decisions = {

chr_border_compacts = {
		major = yes
		potential = {
			tag = CHR
		}
		allow = {
			dip_power = 40
			is_at_war = no
			NOT = { has_country_modifier = chr_border_compact_cooldown }
			NOT = { has_country_modifier = chr_border_compact_betrayal }
			any_country = {
				OR = {
					tag = PLC
					tag = POL
					tag = LIT
					tag = MOS
					tag = RUS
				}
				is_at_war = no
				NOT = { war_with = ROOT }
				has_truce = no
				OR = {
					has_guaranteed = ROOT
					ROOT = { alliance_with = PREV }
				}
			}
		}
		effect = {
			add_dip_power = -40
			add_country_modifier = {
				name = chr_border_compact_cooldown
				duration = 1825
			}
			random_country = {
				limit = {
					OR = {
						tag = PLC
						tag = POL
						tag = LIT
						tag = MOS
						tag = RUS
					}
					is_at_war = no
					NOT = { war_with = ROOT }
					has_truce = no
					OR = {
						has_guaranteed = ROOT
						ROOT = { alliance_with = PREV }
					}
					alliance_with = ROOT
				}
				save_event_target_as = chr_border_compact_partner
				add_opinion = {
					who = ROOT
					modifier = chr_border_compact_support
				}
				if = {
					limit = {
						has_opinion = { who = ROOT value = 80 }
						trust = { who = ROOT value = 50 }
					}
					custom_tooltip = chr_border_compacts_confidence_tt
					add_country_modifier = {
						name = chr_border_compact_confidence
						duration = 1825
					}
					ROOT = {
						add_country_modifier = {
							name = chr_border_compact_confidence_partner
							duration = 1825
						}
					}
				}
				else = {
					custom_tooltip = chr_border_compacts_tension_tt
					add_country_modifier = {
						name = chr_border_compact_watchposts
						duration = 1095
					}
					ROOT = {
						add_country_modifier = {
							name = chr_border_compact_tension
							duration = 1095
						}
					}
				}
			}
			hidden_effect = {
				set_country_flag = chr_border_compacts_pending_review
				country_event = {
					id = chr_flavor.36
					days = 540
				}
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
}
