monarchy_mechanic = {
	monarchy = yes
	heir = yes
	queen = yes
	basic_reform = yes	# = invisible/does not take up a slot
	valid_for_nation_designer = no
	custom_attributes = {
		enables_aristocratic_idea_group = yes
	}
	modifiers = {
		nobles_influence_modifier = 0.05
	}
}

#feudalism vs autocracy
kyivan_rus_reform = {
	icon = "chieftain"
	legacy_equivalent = tsardom_legacy
	potential = {
		OR = {
			tag = KIE
			tag = KRU
		}
	}
	allow_normal_conversion = no
	valid_for_nation_designer = no
	valid_for_new_country = yes
	lock_level_when_selected = yes
	queen = yes
	royal_marriage = yes
	heir = yes
	rulers_can_be_generals = yes
	heirs_can_be_generals = yes
	allow_convert = no
	can_use_trade_post = yes
	can_form_trade_league = yes
	trade_city_government = principality_appanage
	government_abilities = {
		cossacks_mechanic
	}
	allow_force_tributary = yes
	allow_vassal_war = yes
	allow_vassal_alliance = yes
	trigger = {
		OR = {
			tag = KRU
			tag = KIE
		}
	}
	modifiers = {
		min_autonomy = -0.05
		global_manpower_modifier = 0.2
		core_creation = -0.15
		vassal_forcelimit_bonus = 0.15
	}
	custom_attributes = {
		locked_government_type = yes
	}
}
# =========================================================================
# UZHHOROD GOVERNMENT REFORMS – TECHNICAL & NARRATIVE GUIDE
# =========================================================================
# SUITE OVERVIEW:
# Palanok Captaincy -> Komitat System -> Union Synod -> Carpathian Border
# Commissariat forms a staged arc unlocked through the Zakarpatta mission
# tree. Each reform is locked to tag UZH and mutually exclusive with
# outside conversions, ensuring the player progresses along the curated
# Huszt/Uzhhorod path.
#
# TECHNICAL BREAKDOWN:
# - uzh_palanok_captaincy_reform
#   * Locked government with Cossacks mechanic, march-tier defenses
#     (defensiveness, fort upkeep, manpower) matching Palanok fortress role.
#   * Conditional Res Publica content: States General factions (partia_soymu
#     vs partia_kapitaniv) appear when DLC present; custom_attributes flip
#     indigenous idea availability and disable aristocratic.
#   * has_dutch_election = yes enables rotating captain elections reminiscent
#     of frontier councils; integrates with custom government names (KAPITAN).
# - uzh_komitat_system_reform
#   * Replaces captaincy via missions; keeps Cossack mechanic but re-enables
#     aristocratic ideas to reflect noble comitat assemblies. Bonuses shift to
#     state maintenance/governing capacity and noble loyalty, modelling county
#     administration. custom_attributes toggle indigenous idea group off to
#     represent Hungarian legal assimilation.
# - uzh_union_synod_reform
#   * Religious conciliatory reform (tolerance, papal influence, unity) gated
#     by missions/events about the 1646 Union of Uzhhorod and Karlovac Synod.
#     Locks government to maintain ecclesiastical patronage across Orthodox and
#     Greek Catholic institutions; no special abilities beyond broad tolerance.
# - uzh_carpathian_border_commissariat_reform
#   * Late-game militarised frontier board: boosts forcelimit, attrition
#     reduction, governing capacity, army tradition. Keeps government locked to
#     sustain permanent border command once missions complete.
#
# GAMEPLAY SYNERGIES:
# - All reforms require tag = UZH in trigger/potential, preventing AI drift.
# - Cossacks mechanic persists across reforms, tying estates/events (e.g.
#   Uzbek states-general factions) into frontier management.
# - Locked governments align with custom government names defined in
#   common/government_names/000_RIP_names.txt (Palanok Captaincy & Komitat
#   System titles) preserving flavor across rank tiers.
# - Mission rewards and modifiers (uz_komitat_administration,
#   uz_carpathian_hegemony) are balanced around these reforms; avoid enabling
#   alternative reforms that would invalidate stacked bonuses.
#
# HISTORICAL REFERENCES:
# - Palanok Castle captaincies documented in Habsburg military ledgers
#   (Kriegsarchiv Wien, AFA 1730-1780) and Géza Pálffy, "The Origins of the
#   Border Fortresses of Royal Hungary" (2015).
# - Komitat transition analysed in Ivan Pop, *History of Transcarpathia*
#   (Uzhhorod, 2002) and Paul Robert Magocsi, *With Their Backs to the
#   Mountains* (2015).
# - Union Synod background from František Dvorník, *The Slavs in European
#   History and Civilization* (1962) and Mykhailo Лучкай's chronicles of the
#   1646 Uzhhorod union.
# - Border Commissariat concept draws on the Habsburg Military Frontier
#   restructuring after Rákóczi's War of Independence (see Charles Ingrao,
#   *The Habsburg Monarchy 1618-1815*, 2000) describing joint Rusyn-Magyar
#   command posts along the Tysa.
# =========================================================================

uzh_palanok_captaincy_reform = {
	icon = "trading_city"
	potential = {
		tag = UZH
	}
	allow_normal_conversion = no
	valid_for_nation_designer = no
	valid_for_new_country = no
	lock_level_when_selected = yes
	queen = yes
	heir = no
	duration = 20
	has_term_election = yes
	rulers_can_be_generals = yes
	royal_marriage = yes
	allow_convert = no
	government_abilities = {
		cossacks_mechanic
	}
	allow_force_tributary = yes
	trigger = {
		tag = UZH
	}
	modifiers = {
		defensiveness = 0.2
		fort_maintenance_modifier = -0.2
		manpower_recovery_speed = 0.1
		hostile_attrition = 1
		garrison_size = 0.2
	}
	custom_attributes = {
		locked_government_type = yes
		has_dutch_election = yes
		enables_aristocratic_idea_group = no
		enables_indigenous_idea_group = yes
		enables_native_idea_group = yes
	}
	conditional = {
		allow = {
			has_dlc = "Res Publica"
		}
		states_general_mechanic = {
			partia_soymu = { # "Партія Сойму" (Торгова Олігархія)
				trade_efficiency = 0.10
				build_cost = -0.10
				diplomatic_reputation = 1
				republican_tradition = 0.5
				native_assimilation = 0.25
			}

			partia_kapitaniv = { # "Партія Капітанів" (Військова Демократія)
				land_morale = 0.10
				global_manpower_modifier = 0.15
				defensiveness = 0.10
				republican_tradition = -0.5
				army_tradition = 0.25
			}
		}
	}
}

uzh_komitat_system_reform = {
	icon = "nobleman"
	potential = {
		tag = UZH
	}
	allow_normal_conversion = no
	valid_for_nation_designer = no
	valid_for_new_country = no
	lock_level_when_selected = yes
	queen = yes
	heir = yes
	rulers_can_be_generals = yes
	royal_marriage = yes
	allow_convert = no
	government_abilities = {
		cossacks_mechanic
	}
	allow_force_tributary = yes
	trigger = {
		tag = UZH
	}
	modifiers = {
		state_maintenance_modifier = -0.2
		governing_capacity_modifier = 0.2
		nobles_loyalty_modifier = 0.1
		all_estate_loyalty_equilibrium = 0.05
		autonomy_change_time = -0.1
		max_absolutism = 5
		manpower_recovery_speed = 0.05
	}
	custom_attributes = {
		locked_government_type = yes
		enables_aristocratic_idea_group = yes
		enables_indigenous_idea_group = no
	}
}

ruthenian_principality_reform = {
	icon = "generic_people"
	legacy_equivalent = principality_legacy
	valid_for_nation_designer = no
	valid_for_new_country = no
	lock_level_when_selected = yes
	allow_convert = no
	queen = yes
	heir = yes
	rulers_can_be_generals = no
	royal_marriage = yes
	government_abilities = {
		cossacks_mechanic
	}
	trigger = {
		OR = {
			tag = KRU
			tag = KIE
			culture = ruthenian
		}
	}
	modifiers = {
		state_governing_cost = -0.1
		vassal_income = 0.5
		min_autonomy = 0.25
	}
	custom_attributes = {
		locked_government_type = yes
	}
}


principality_appanage = {
	icon = "free_city"
	allow_normal_conversion = no
	lock_level_when_selected = yes
	queen = yes
	heir = yes
	rulers_can_be_generals = no
	royal_marriage = yes
	modifiers = {
		trade_efficiency = 0.1
		development_cost = -0.1
		max_absolutism = -20
		burghers_influence_modifier = 0.15
	}
	fixed_rank = 1
	custom_attributes = {
		locked_government_type = yes
		enables_plutocratic_idea_group = yes
		enables_aristocratic_idea_group = no
	}
	conditional = {
		allow = {
			has_dlc = "The Cossacks"
		}
		government_abilities = {
			cossacks_mechanic
		}
	}
}

#hereditary vs nobility
elected_assemblies_reform = {
	icon = "fist_in_air"
	allow_normal_conversion = yes
	trigger = {
		has_reform = kyivan_rus_reform
	}
	modifiers = {
		min_autonomy_in_territories = -0.2
		candidate_random_bonus = 2
		diplomats = 1
		diplomatic_reputation = 1
		envoy_travel_time = -0.25
		inflation_reduction = 0.05
	}
}

boyar_elite_reform = {
	icon = "soldiers_6"
	allow_normal_conversion = yes
	trigger = {
		OR = {
			culture = ruthenian
			has_reform = ruthenian_principality_reform
			has_reform = kyivan_rus_reform
                    has_reform = principality_appanage
		}
	}
	modifiers = {
		army_tradition = 0.5
		land_attrition = -0.1
		nobles_influence_modifier = 0.1
	}
}

#bureaucracy
sacred_regulation_reform = {
	icon = "english_monarchy"
	allow_normal_conversion = yes
	trigger = {
		OR = {
			has_reform = ruthenian_principality_reform
			has_reform = kyivan_rus_reform
			culture = ruthenian
                    has_reform = principality_appanage
		}
	}
	modifiers = {
		tolerance_own = 2
		monthly_splendor = 1
		unjustified_demands = -0.25
		yearly_absolutism = 1
	}
}

patriarch_engagement_reform = {
	icon = "clergyman"
	allow_normal_conversion = yes
	trigger = {
		OR = {
			has_reform = ruthenian_principality_reform
			has_reform = kyivan_rus_reform
			culture = ruthenian
                    has_reform = principality_appanage
		}
	}
	modifiers = {
		missionary_maintenance_cost = -0.5
		global_missionary_strength = 0.02
		church_influence_modifier = 0.1
	}
}

uzh_union_synod_reform = {
	icon = "clergyman"
	potential = {
		tag = UZH
	}
	allow_normal_conversion = no
	valid_for_nation_designer = no
	valid_for_new_country = no
	lock_level_when_selected = yes
	queen = yes
	heir = yes
	royal_marriage = yes
	allow_convert = no
	trigger = {
		tag = UZH
	}
	modifiers = {
		tolerance_own = 1
		tolerance_heretic = 2
		missionary_maintenance_cost = -0.25
		religious_unity = 0.1
		papal_influence = 1
	}
	custom_attributes = {
		locked_government_type = yes
	}
}

#growth_of_administration
merchant_nobility_reform = {
	icon = "merchant"
	allow_normal_conversion = yes
	trigger = {
		OR = {
			has_reform = ruthenian_principality_reform
			has_reform = kyivan_rus_reform
			culture = ruthenian
                    has_reform = principality_appanage
		}
	}
	modifiers = {
		merchants = 1
		global_tax_modifier = 0.1
		trade_company_investment_cost = -0.33
		burghers_influence_modifier = 0.1
	}
}

open_trading_ports_reform = {
	icon = "paper_money_map"
	allow_normal_conversion = yes
	trigger = {
		OR = {
			has_reform = ruthenian_principality_reform
			has_reform = kyivan_rus_reform
			culture = ruthenian
                    has_reform = principality_appanage
		}
	}
	modifiers = {
		global_own_trade_power = 0.2
		center_of_trade_upgrade_cost = -0.5
		trade_steering = 0.25
	}
}

#deliberative_assembly
assembly_houses_reform = {
	icon = "man_on_podium"
	allow_normal_conversion = yes
	trigger = {
		OR = {
			has_reform = ruthenian_principality_reform
			has_reform = kyivan_rus_reform
			culture = ruthenian
                    has_reform = principality_appanage
		}
	}
	different_religion_acceptance = 25
	modifiers = {
		global_institution_spread = 0.25
		global_unrest = -1
		stability_cost_modifier = -0.1
	}
}

#absolute rule vs constitutional
considerable_bloodline_reform = {
	icon = "king_highlighted"
	allow_normal_conversion = yes
	maintain_dynasty = yes
	trigger = {
		OR = {
			has_reform = ruthenian_principality_reform
			has_reform = kyivan_rus_reform
			culture = ruthenian
                    has_reform = principality_appanage
		}
	}
	allow_convert = yes
	modifiers = {
		max_absolutism = 10
		monarch_admin_power = 2
		legitimacy = 1
	}
}

representation_monarchy_reform = {
	icon = "fist_in_air"
	allow_normal_conversion = no
	conditional = {
		allow = {
			has_dlc = "Res Publica"
		}
		queen = no
		heir = no
		duration = 4
		has_term_election = yes
		states_general_mechanic = {
			boyars = {
				global_tax_modifier = 0.2
				liberty_desire_from_subject_development = -0.15
			}
			princes = {
				max_absolutism = 15
				local_autonomy = -0.05
				legitimacy = 1
				monthly_reform_progress = 0.1
			}
		}
	}
	trigger = {
		AND = {
			has_reform = boyar_elite_reform
			has_reform = kyivan_rus_reform
		}
	}
	lock_level_when_selected = yes
	allow_convert = yes
	modifiers = {
		global_unrest = -1
		global_tax_modifier = 0.1
		max_absolutism = -10
		legitimacy = 0.5
		promote_culture_cost = -0.25
		years_of_nationalism = -10
		global_missionary_strength = 0.02
	}
}

#separation of power
legislative_rada_reform = {
	icon = "assembly_hall"
	allow_normal_conversion = yes
	trigger = {
		OR = {
			has_reform = ruthenian_principality_reform
			has_reform = kyivan_rus_reform
			has_reform = representation_monarchy_reform
			culture = ruthenian
		}
	}
	conditional = {
		allow = {
			has_dlc = "Common Sense"
		}
		has_parliament = yes
	}
	modifiers = {
		yearly_corruption = -0.1
		global_tax_modifier = 0.1
		advisor_cost = -0.15
		stability_cost_modifier = -0.1
	}
}

uzh_carpathian_border_commissariat_reform = {
	icon = "soldiers_4"
	potential = {
		tag = UZH
	}
	allow_normal_conversion = no
	valid_for_nation_designer = no
	valid_for_new_country = no
	lock_level_when_selected = yes
	queen = yes
	heir = yes
	royal_marriage = yes
	allow_convert = yes
	trigger = {
		tag = UZH
	}
	modifiers = {
		army_tradition = 0.5
		land_forcelimit_modifier = 0.2
		land_attrition = -0.1
		governing_capacity = 50
	}
	custom_attributes = {
		locked_government_type = yes
	}
}

divine_tsyisar_reform = {
	icon = "king_highlighted"
	allow_normal_conversion = yes
	trigger = {
		OR = {
			has_reform = considerable_bloodline_reform
			has_reform = sacred_regulation_reform
			has_reform = kyivan_rus_reform
		}
	}
	lock_level_when_selected = yes
	allow_convert = no
	conditional = {
		allow = {
			has_dlc = "Third Rome"
		}
		claim_states = yes
	}
	modifiers = {
		legitimacy = 1
		global_unrest = -2
		max_absolutism = 10
		free_policy = 1
	}
}

republic_mechanic = {
	basic_reform = yes
	republican_name = yes
	royal_marriage = no
	republic = yes
	duration = 4
	has_term_election = yes
	custom_attributes = {
		enables_plutocratic_idea_group = yes
		enables_aristocratic_idea_group = no
	}
	modifiers = {
		burghers_influence_modifier = 0.15
		vaisyas_influence_modifier = 0.15
		max_absolutism = -40
	}
	valid_for_nation_designer = no
}

#oligarchy_merchant_class_noble_elite
siversk_veche_reform = {
	icon = "merchant"
	boost_income = yes
	allow_normal_conversion = no
	valid_for_nation_designer = no
	valid_for_new_country = no
	lock_level_when_selected = yes
	queen = no
	heir = no
	duration = 4
	has_term_election = yes
	rulers_can_be_generals = yes
	royal_marriage = no
	government_abilities = {
		cossacks_mechanic
	}
	allow_force_tributary = yes
	potential = {
		tag = CHR
	}
	trigger = {
		tag = CHR
	}
	modifiers = {
		merchants = 1
		governing_capacity = 100
		all_estate_loyalty_equilibrium = 0.05
		burghers_loyalty_modifier = 0.1
		nobles_loyalty_modifier = 0.05
		global_trade_power = 0.1
		production_efficiency = 0.05
		republican_tradition = 0.1
		manpower_recovery_speed = 0.06
		parliament_backing_chance = 0.15
	}
	custom_attributes = {
		locked_government_type = yes
		enables_plutocratic_idea_group = yes
		enables_aristocratic_idea_group = no
		has_parliament = yes
	}
	conditional = {
		allow = {
			has_dlc = "Res Publica"
		}
		can_use_trade_post = yes
	}
	conditional = {
		allow = {
			has_dlc = "The Cossacks"
		}
		custom_attributes = {
			enables_estate_cossacks = yes
		}
	}
}

cossacks_reform = {
	icon = "horde_riding"
	legacy_equivalent = cossacks_legacy_reform
	allow_normal_conversion = yes
	potential = {
		OR = {
			AND = {
				OR = {
					tag = ZAZ
					tag = HET
				}
				NOT = {
					map_setup = map_setup_random
				}
			}
			has_reform = cossacks_reform
			have_had_reform = cossacks_reform
		}
	}
	raze_province = yes
	government_abilities = {
		cossacks_mechanic
	}
	conditional = {
		allow = {
			has_dlc = "Origins"
		}
		custom_attributes = {
			has_itinerant_capital = yes
		}
	}
	trigger = {
		always = yes
	}
	fixed_rank = 1
	valid_for_new_country = yes
	nation_designer_trigger = {
		any_owned_province = {
			has_terrain = steppe
		}
	}
	custom_attributes = {
		enables_plutocratic_idea_group = yes
		enables_aristocratic_idea_group = no
	}
	valid_for_nation_designer = yes
	nation_designer_cost = 60
	modifiers = {
		cavalry_power = 0.25
		cavalry_cost = -0.15
		cav_to_inf_ratio = 0.25
		governing_capacity = 150
		loot_amount = 0.5
	}
	duration = 4
}


# Chernihiv Grain Directorate reform – Mechanics, Narrative, References
# Mechanics: Late mission reward locking government to agrarian management with governing capacity, goods produced,
# and estate loyalty tweaks tuned for silo investments.
# Narrative: Imagines a Left-Bank grain combine where hetman-appointed directors run the harvest bureaucracy.
# References: Tetiana Tairova-Yakovleva, *Ivan Mazepa and His Age* (2007); Serhii Plokhy, *The Cossack Myth* (2012).
chr_grain_directorate_reform = {
	icon = "vodka_monopoly"
	allow_normal_conversion = no
	valid_for_nation_designer = no
	valid_for_new_country = no
	queen = yes
	heir = yes
	royal_marriage = yes
	rulers_can_be_generals = yes
	allow_convert = no
	potential = {
		tag = CHR
	}
	trigger = {
		tag = CHR
		has_country_flag = chr_agro_hypercorp_complete
	}
	modifiers = {
		global_unrest = -1
		global_trade_goods_size_modifier = 0.1
		production_efficiency = 0.1
		burghers_loyalty_modifier = 0.1
		manpower_recovery_speed = 0.05
	}
	custom_attributes = {
		locked_government_type = yes
		extra_trade_goods_from_grain = yes
		chinampa_farms_mechanic = yes
	}
	effect = {
		custom_tooltip = chr_grain_directorate_reform_tt
		hidden_effect = {
			every_owned_province = {
				limit = {
					trade_goods = grain
				}
				add_province_modifier = {
					name = chr_grain_directorate_province
					duration = -1
					hidden = yes
				}
			}
		}
	}
	removed_effect = {
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_modifier = chr_grain_directorate_province
				}
				remove_province_modifier = chr_grain_directorate_province
			}
		}
	}
	ai = {
		factor = 1
	}
}

# #republican_virtues
# cossacks_terror_reform = {
# 	icon = "soldiers_6"
# 	allow_normal_conversion = yes
# 	trigger = {
# 		OR = {
# 			has_reform = cossacks_reform
# 		}
# 	}
# 	lock_level_when_selected = yes
# 	allow_convert = yes
# 	modifiers = {
# 		unrest_catholic_provinces = -4
# 		reelection_cost = -0.2
# 		iplomatic_reputation = 1
# 		diplomatic_upkeep = 1
# 		fabricate_claims_cost = 0.5
# 		monthly_gold_inflation_modifier = 0.5
# 	}
# }

# #frequent_elections_vs_consolidation_of_power
# sacred_dialog_reform = {
# 	icon = "english_monarchy"
# 	allow_normal_conversion = yes
# 	trigger = {
# 		OR = {
# 			culture = ruthenian
# 			tag = ZAZ
# 			tag = HET
# 			has_reform = cossacks_reform
# 		}
# 	}
# 	modifiers = {
# 		tolerance_heretic = 2
# 		yearly_corruption = -0.01
# 		rival_change_cost = -0.25
# 		max_absolutism = 10
# 	}
# }

# #federalism_vs_unitarism_vs_confederacy
# chumak_nobility_reform = {
# 	icon = "merchant"
# 	allow_normal_conversion = yes
# 	trigger = {
# 		OR = {
# 			culture = ruthenian
# 			tag = ZAZ
# 			tag = HET
# 			has_reform = cossacks_reform
# 		}
# 	}
# 	modifiers = {
# 		placed_merchant_power = 3
# 		production_efficiency = -0.1
# 		mercantilism_cost = -0.33
# 	}
# }

# #parliamentary_vs_presidential
# voluntary_houses_reform = {
# 	icon = "man_on_podium"
# 	allow_normal_conversion = yes
# 	trigger = {
# 		OR = {
# 			culture = ruthenian
# 			tag = ZAZ
# 			tag = HET
# 			has_reform = cossacks_reform
# 		}
# 	}
# 	different_religion_acceptance = 10
# 	modifiers = {
# 		institution_spread_from_true_faith = 0.25
# 		stability_cost_modifier = -0.05
# 	}
# }

# #guiding_principle_of_administration
# cos_and_het_reform = {
# 	icon = "fist_in_air"
# 	allow_normal_conversion = no
# 	conditional = {
# 		allow = {
# 			has_dlc = "Res Publica"
# 		}
# 		queen = no
# 		heir = no
# 		duration = 4
# 		has_term_election = yes
# 		states_general_mechanic = {
# 			cossacks = {
# 				production_efficiency = 0.2
# 				reduced_liberty_desire = 60
# 			}
# 			hetman = {
# 				legitimacy = 1.5
# 				local_years_of_nationalism = 5
# 				republican_tradition = 0.5
# 				monthly_reform_progress = 5
# 			}
# 		}
# 	}
# 	trigger = {
# 		AND = {
# 			has_reform = cossacks_terror_reform
# 			tag = HET
# 		}
# 	}
# 	lock_level_when_selected = yes
# 	allow_convert = yes
# 	modifiers = {
# 		stability_cost_modifier = -0.025
# 		production_efficiency = -0.1
# 		legitimacy = -0.01
# 		republican_tradition = -0.25
# 		relation_with_same_culture = 5
# 		min_autonomy_in_territories = 0.2
# 		global_heretic_missionary_strength = -0.05
# 	}
# }

# #electorate
# great_hauptmann_reform = {
# 	icon = "king_highlighted"
# 	allow_normal_conversion = yes
# 	trigger = {
# 		OR = {
# 			#has_reform = considerable_bloodline_reform
# 			has_reform = sacred_dialog_reform
# 			tag = HET
# 		}
# 	}
# 	lock_level_when_selected = yes
# 	allow_convert = no
# 	conditional = {
# 		allow = {
# 			has_dlc = "Third Rome"
# 		}
# 		claim_states = yes
# 	}
# 	modifiers = {
# 		republican_tradition = 0.5
# 		stability_cost_modifier = -0.05
# 		legitimacy = 0.1
# 		possible_adm_policy = 1
# 	}
# }
